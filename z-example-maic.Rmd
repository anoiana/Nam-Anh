---
title: "An Example of MAIC"
author:
  - name: Nam-Anh
date: "`r Sys.Date()`"
bibliography: citation.bib
csl: citation.csl
output:
  distill::distill_article:
    toc: true
    toc_depth: 3
    pandoc_args: ["--number-sections"]
    code_folding: hide
editor_options: 
  chunk_output_type: console
---

\newcommand{\tp}[1]{{#1}^{\top}}
\newcommand{\bf}[1]{\boldsymbol{#1}}


```{r setup, include=FALSE}
if(!library(pacman, logical.return = TRUE)) install.packages("pacman")
pacman::p_load(tidyverse, rjags, magrittr, kableExtra)

lb = function(...){
     x = unlist(strsplit(as.character(rlang::expr(...)),"\\."))
     word = switch(which(c("tab","fig","eq")%in% x[1]),"Table ","Figure ","Eq.")
     paste0(word,"\\@ref(",x[1],":",x[2],")")
}

MyTable = function(x, cap = NULL, ...){
     kableExtra::kbl(x, booktab = FALSE, caption = cap,...)|>
     kableExtra::kable_styling(bootstrap_options = c("striped"))
}
```

We delineate an example in which we'd like to compare two treatments A and C. However, only individual-patient data of treatment A and B are available, and treatment C is only available through a previous study that compare treatment B and C. All information of treatment C reported in the study comprises mean and standard deviation of outcomes and baseline characteristics, so this type of data is usually called aggregate data. For example, 

```{r tab1, fig.align='center'}
set.seed(1234)
ipd = tibble(
     trt = sample(c("treatment","placebo"),100, replace = T),
     age = rpois(100,30),
     gender = sample(c("F","M"),100, prob = c(0.3,0.7), replace = T),
     weight = rgamma(100,70,1.2),
     region = sample(c("urban","rural","suburban"), 100, replace = T, prob = c(0.5,0.4,0.1))
)

ipd|> MyTable("Individual patient data.", format = "html")|>
     kableExtra::scroll_box(height = "500px", width = "400px",
                            extra_css  = "border:0.1px; margin-left: auto;margin-right: auto;")
```